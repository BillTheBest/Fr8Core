<!DOCTYPE html><html><head><meta charset="utf-8"><title>Update Account Billing Plan</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><style>@import url(http://fonts.googleapis.com/css?family=Roboto:400,700|Inconsolata|Raleway:200);.hljs-comment,.hljs-title{color:#8e908c}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#c82829}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f5871f}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#eab700}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#718c00}.css .hljs-hexcolor{color:#3e999f}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#4271ae}.hljs-keyword,.javascript .hljs-function{color:#8959a8}.hljs{display:block;background:white;color:#4d4d4c;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}body{color:black;background:white;font-family:'Roboto',Helvetica,sans-serif;font-size:14px;line-height:1.42}header{border-bottom:1px solid #f2f2f2;margin-bottom:12px}h1,h2,h3,h4,h5{color:black;margin:12px 0}h1 .permalink,h2 .permalink,h3 .permalink,h4 .permalink,h5 .permalink{margin-left:6px;opacity:0;transition:opacity .25s ease}h1:hover .permalink,h2:hover .permalink,h3:hover .permalink,h4:hover .permalink,h5:hover .permalink{opacity:1}h1{font-family:'Raleway',Helvetica,sans-serif;font-size:36px;font-weight:500}h2{font-family:'Raleway',Helvetica,sans-serif;font-size:30px;font-weight:500}h3{font-size:100%;text-transform:uppercase}h5{font-size:100%;font-weight:normal}p{margin:0 0 10px}p.choices{line-height:1.6}a{color:#428bca;text-decoration:none}li p{margin:0}dl dt{float:left;width:160px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd{margin-left:180px}blockquote{color:rgba(0,0,0,0.5);font-size:15.5px;padding:10px 20px;margin:12px 0;border-left:5px solid #e8e8e8}blockquote p:last-child{margin-bottom:0}pre{background-color:#f5f5f5;padding:12px;border:1px solid #cfcfcf;border-radius:6px}pre code{background-color:transparent;padding:0;border:none}code{color:#444;background-color:#f5f5f5;font-family:'Inconsolata',monospace;padding:1px 4px;border:1px solid #cfcfcf;border-radius:3px}ul,ol{padding-left:2em}table{border-collapse:collapse;border-spacing:0}table tr:nth-child(2n){background-color:#fafafa}table th,table td{padding:6px 12px;border:1px solid #d9d9d9}nav{position:fixed;top:24px;bottom:0;overflow-y:auto;right:0}nav .resource-group{padding:0}nav .resource-group .heading{position:relative}nav .resource-group .heading .chevron{position:absolute;top:12px;right:12px;opacity:.5}nav .resource-group .heading a{display:block;color:black;opacity:.7;border-left:2px solid transparent;margin:0}nav .resource-group .heading a:hover{border-left:2px solid black}nav ul{list-style-type:none;padding-left:0}nav ul a{display:block;font-size:13px;color:rgba(0,0,0,0.7);padding:8px 12px;border-top:1px solid #d9d9d9;border-left:2px solid transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}nav ul a:hover{border-left:2px solid black}nav ul>li{margin:0}nav ul>li:first-child{margin-top:-12px}nav ul>li:last-child{margin-bottom:-12px}nav ul ul a{padding-left:24px}nav ul ul li{margin:0}nav ul ul li:first-child{margin-top:0}nav ul ul li:last-child{margin-bottom:0}nav>div>div>ul>li:first-child>a{border-top:none}.preload *{transition:none !important}.pull-left{float:left}.pull-right{float:right}.badge{display:inline-block;float:right;min-width:10px;min-height:14px;padding:3px 7px;font-size:12px;color:#000;background-color:#f2f2f2;border-radius:10px;margin-top:-2px;margin-bottom:-2px}.badge.get{color:#70bbe1;background-color:#d9edf7}.badge.head{color:#70bbe1;background-color:#d9edf7}.badge.options{color:#70bbe1;background-color:#d9edf7}.badge.put{color:#f0db70;background-color:#fcf8e3}.badge.patch{color:#f0db70;background-color:#fcf8e3}.badge.post{color:#93cd7c;background-color:#dff0d8}.badge.delete{color:#ce8383;background-color:#f2dede}.collapse-button{float:right}.collapse-button .close{display:none;color:#428bca;cursor:pointer}.collapse-button .open{color:#428bca;cursor:pointer}.collapse-button.show .close{display:inline}.collapse-button.show .open{display:none}.collapse-content{max-height:0;overflow:hidden;transition:max-height .3s ease-in-out}nav{width:220px}.container{max-width:940px;margin-left:auto;margin-right:auto}.container .row .content{margin-left:-35px;width:1050px}.container .row:after{content:'';display:block;clear:both}.container-fluid nav{width:22%}.container-fluid .row .content{margin-left:24%;width:76%}@media (max-width:1200px){nav{width:200px}.container{max-width:840px}.container .row .content{margin-left:224px;width:606px}}@media (max-width:992px){nav{width:170px}.container{max-width:720px}.container .row .content{margin-left:194px;width:526px}}@media (max-width:768px){nav{display:none}.container{width:95%;max-width:none}.container .row .content,.container-fluid .row .content{margin-left:auto;margin-right:auto;width:95%}}.back-to-top{position:fixed;z-index:1;bottom:0;right:24px;padding:4px 8px;color:rgba(0,0,0,0.5);background-color:#f2f2f2;text-decoration:none !important;border-top:1px solid #d9d9d9;border-left:1px solid #d9d9d9;border-right:1px solid #d9d9d9;border-top-left-radius:3px;border-top-right-radius:3px}.resource-group{padding:12px;margin-bottom:12px;background-color:white;border:1px solid #d9d9d9;border-radius:6px}.resource-group h2.group-heading,.resource-group .heading a{padding:12px;margin:-12px -12px 12px -12px;background-color:#f2f2f2;border-bottom:1px solid #d9d9d9;border-top-left-radius:6px;border-top-right-radius:6px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}nav .resource-group .heading a{margin-bottom:0}nav .resource-group .collapse-content{padding:0}.action{margin-bottom:12px;padding:12px 12px 0 12px;overflow:hidden;border:1px solid transparent;border-radius:6px}.action h4{padding:12px;margin:-12px -12px 12px -12px;border-bottom:1px solid transparent;border-top-left-radius:6px;border-top-right-radius:6px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.action h4 .name{float:right;font-weight:normal}.action h4 .method{padding:6px 12px;margin-right:12px;border-radius:3px}.action h4 .method.get{color:#fff;background-color:#337ab7}.action h4 .method.head{color:#fff;background-color:#337ab7}.action h4 .method.options{color:#fff;background-color:#337ab7}.action h4 .method.put{color:#000;background-color:#f0ad4e}.action h4 .method.patch{color:#000;background-color:#f0ad4e}.action h4 .method.post{color:#fff;background-color:#5cb85c}.action h4 .method.delete{color:#fff;background-color:#d9534f}.action h4 code{color:#444;background-color:#f5f5f5;border-color:#cfcfcf}.action dl.inner{padding-bottom:2px}.action .title{border-bottom:1px solid white;margin:0 -12px -1px -12px;padding:12px}.action.get{border-color:#bce8f1}.action.get h4{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.head{border-color:#bce8f1}.action.head h4{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.options{border-color:#bce8f1}.action.options h4{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.post{border-color:#d6e9c6}.action.post h4{color:#5cb85c;background:#dff0d8;border-bottom-color:#d6e9c6}.action.put{border-color:#faebcc}.action.put h4{color:#f0ad4e;background:#fcf8e3;border-bottom-color:#faebcc}.action.patch{border-color:#faebcc}.action.patch h4{color:#f0ad4e;background:#fcf8e3;border-bottom-color:#faebcc}.action.delete{border-color:#ebccd1}.action.delete h4{color:#d9534f;background:#f2dede;border-bottom-color:#ebccd1}</style></head><body class="preload"><a href="#top" class="text-muted back-to-top"><i class="fa fa-toggle-up"></i>&nbsp;Back to top</a><div class="container"><div class="row"><nav><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#top">Overview</a></div><div class="collapse-content"><ul><li><a href="#header-url">URL</a></li><!--<li><a href="#header-formats">Formats</a></li>--><li><a href="#header-http-method">HTTP Method</a></li><li><a href="#header-parameters">Parameters</a></li><li><a href="#header-example">Request</a></li><li><a href="#header-request-body">Example Request Body</a></li><li><a href="#header-response">Response</a></li></ul></div></div></nav><div class="content"><header><h1 id="top">Update Account Billing Plan</h1></header><p>This updates the billing plan information, billing address, and credit card information for the specified account.</p>
<h2 id="header-url">URL <a class="permalink" href="#header-url" aria-hidden="true">¶</a></h2>
<pre><code>/accounts/{accountId}/<span class="hljs-keyword">billing_plan
</span></code></pre>
<!--<h2 id="header-formats">Formats <a class="permalink" href="#header-formats" aria-hidden="true">¶</a></h2>
<pre><code>XML, <span class="hljs-built_in">JSON</span></code></pre>-->
<h2 id="header-http-method">HTTP Method <a class="permalink" href="#header-http-method" aria-hidden="true">¶</a></h2>
<pre><code><span class="hljs-title">PUT</span></code></pre>
<h2 id="header-parameters">Parameters <a class="permalink" href="#header-parameters" aria-hidden="true">¶</a></h2>
<p>The billingAddressIsCreditCardAddress parameter (found when <a href="https://www.docusign.com/p/RESTAPIGuide/Content/REST%20API%20References/Get%20Account%20Billing%20Plan.htm">Getting Account Billing Plan information</a>) determines how the
billing address and creditCardInformation address are updated.</p>
<ul>
<li>
<p>If billingAddressIsCreditCardAddress is ‘true’ then either the billingAddress values or the creditCardInformation address values can be used to update the single address used as billing and credit card address. If the PUT updates both billing and credit card addresses, then the address field values must exactly match or an error is returned. DocuSign recommends that only one of the addresses is updated.</p>
</li>
<li>
<p>If billingAddressIsCreditCardAddress is ‘false’ then the billingAddress is a billing contact address and the credit card address is the current credit card address for billing and can be updated separately.</p>
</li>
</ul>
<p>When updating creditCardInformation, all of the creditCardInformation must be included in the update (including the cardNumber, nameOnCard, expirationYear, expirationMonth, and address), even if only part of the information is being changed. The only exception is that the expirationMonth and expirationYear may be updated without updating the other information.</p>
<blockquote>
<p><strong>NOTE:</strong> When updating account billing plan information to upgrade a plan if creditCardInformation is not included, the system will use the existing credit card information for any charges.</p>
</blockquote>
<p>The referralInformation is included so that promotional codes (promoCode) can be used when upgrading plans.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Required?</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>BillingAddress</td>
<td>No</td>
<td>String</td>
<td>A complex type that contains the following address information for the account: <br/> <ul> <li> address1 – The first address line for the billing address. </li><li> address2 – An additional address line for the billing address. </li> <li> city – The city for the billing address. </li><li> state – The state for the billing address, see note below. </li><li> postalCode – The postal code for the billing address. </li><li> phone – The telephone number for the billing address. </li><li> fax – The fax number for the billing address. </li> <li> country – The country code for the billing address, see note below. </li><li> firstName – The first name of a contact person associated with the billing address. </li><li> lastName – The last name of a contact person associated with the billing address. </li> <li> email – The email address associated with the billing address. </li></ul>  <strong>Note:</strong> If country is US (United States) then State codes are validated for US States. Otherwise, State is treated as a non-validated string and serves the purpose of entering a state/province/region.</td>
</tr>
<tr>
<td>CreditCardInformation</td>
<td>No</td>
<td>String</td>
<td>A complex type that has information about the credit card used to pay for this account. It included the elements:  <ul> <li> cardNumber – The credit card number. Note that in responses only the last four digits are shown. </li><li> expirationMonth – The expiration month shown on the credit card. </li><li> expirationYear – The expiration year shown on the credit card. </li><li> nameOnCard – The name listed on the credit card. </li><li> cardType – The credit card type can be: visa, mastercard, or amex. </li></ul> address – A complex element with the credit card billing address information. This can be the same as billing address and follows the same rules as billingAddress. It contains the following elements: street1, street2, city, state, zip, zipPlus4, phone, fax, and country.</td>
</tr>
<tr>
<td>EnableSupport</td>
<td>No</td>
<td>Boolean</td>
<td>If true, the plan has support enabled.</td>
</tr>
<tr>
<td>IncludeSeats</td>
<td>No</td>
<td>String</td>
<td>The number of seats included in the plan.</td>
</tr>
<tr>
<td>SaleDiscountPercent, <br/> SaleDiscountAmount, <br/> SaleDiscountFixedAmount, <br/> SaleDiscountPeriods, <br/> SaleDiscountSeatPriceOverride</td>
<td>No</td>
<td>String</td>
<td>These elements are reserved for DoucSign use only.</td>
</tr>
<tr>
<td>RenewalStatus</td>
<td>No</td>
<td>String</td>
<td>Sets the renewal status for the account. The acceptable values are: <ul> <li> auto: The account automatically renews. </li><li> queued_for_close: Account will be closed at the billingPeriodEndDate. </li><li> queued_for_downgrade: Account will be downgraded at the billingPeriodEndDate. </li> </ul></td>
</tr>
<tr>
<td>DowngradeReason</td>
<td>No</td>
<td>String</td>
<td>An optional element that has the reason for downgrade of account.</td>
</tr>
<tr>
<td>PlanInformation <br/> currencyCode</td>
<td>Yes</td>
<td></td>
<td>This is the ISO currency code for the account.</td>
</tr>
<tr>
<td>PlanInformation <br/> planFeatureSets</td>
<td>See Description</td>
<td></td>
<td>A complex type that sets the feature sets for the account. It contains the following information (all string content): <ul> <li> envelopeFee - An incremental envelope cost for plans with envelope overages (when isEnabled=true).  </li> <li> featureSetId - A unique ID for the feature set. </li> <li> fixedFee - A one-time fee associated with the plan (when isEnabled=true). </li> isActive - Determines if the feature set is actively set as part of the plan. </li><li> isEnabled - Determines if the feature set is actively enabled as part of the plan. </li> <li> name - The name of the feature set. </li><li> seatFee - An incremental seat cost for seat-based plans (when isEnabled=true).</li></ul></td>
</tr>
<tr>
<td>PlanInformation <br/> planId</td>
<td>No</td>
<td>String</td>
<td>The plan ID for the account. It uniquely identifies a plan and is used to set plans in other functions.</td>
</tr>
<tr>
<td>PlanInformation <br/> freeTrialDaysOverride</td>
<td>No</td>
<td>String</td>
<td>Reserved for DocuSign use only.</td>
</tr>
<tr>
<td>ReferralInformation</td>
<td>No</td>
<td></td>
<td>A complex type that contains the following information for entering referral and discount information. The following items are included in the referral information (all string content): referralCode, referrerName, advertisementId, publisherId, shopperId, promoCode, groupMemberId, idType, and industry</td>
</tr>
</tbody>
</table>
<h2 id="header-example">Request <a class="permalink" href="#header-example" aria-hidden="true">¶</a></h2>
<h4 id="header-request-body">Example Request Body <a class="permalink" href="#header-request-body" aria-hidden="true">¶</a></h4>
<p><strong>PUT</strong> https://{server}/restapi/{apiVersion}/accounts/{accountId}/billing_plan</p>
<pre><code>{
    <span class="hljs-string">"billingAddress"</span>: {
        <span class="hljs-string">"address1"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"address2"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"city"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"state"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"postalCode"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"phone"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"fax"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"country"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"email"</span>: <span class="hljs-string">"string "</span>
        }
    },
      <span class="hljs-string">"creditCardInformation"</span>:{
        <span class="hljs-string">"cardNumber"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"expirationMonth"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"expirationYear"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"nameOnCard"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"cardType"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"address"</span>: {
          <span class="hljs-string">"street1"</span>: <span class="hljs-string">"string"</span>,
          <span class="hljs-string">"street2"</span>: <span class="hljs-string">"string"</span>,
          <span class="hljs-string">"city"</span>: <span class="hljs-string">"string"</span>,
          <span class="hljs-string">"state"</span>: <span class="hljs-string">"string"</span>,
          <span class="hljs-string">"zip"</span>: <span class="hljs-string">"string"</span>,
          <span class="hljs-string">"zipPlus4"</span>: <span class="hljs-string">"string"</span>,
          <span class="hljs-string">"phone"</span>: <span class="hljs-string">"string"</span>,
          <span class="hljs-string">"fax"</span>: <span class="hljs-string">"string"</span>,
          <span class="hljs-string">"country"</span>: <span class="hljs-string">"string"</span>
        }
    },
    <span class="hljs-string">"enableSupport"</span>:<span class="hljs-string">"String content"</span>,
    <span class="hljs-string">"includedSeats"</span>:<span class="hljs-string">"String content"</span>,
    <span class="hljs-string">"saleDiscountPercent"</span>: <span class="hljs-string">"string"</span>,
    <span class="hljs-string">"saleDiscountAmount"</span>: <span class="hljs-string">"string"</span>,
    <span class="hljs-string">"saleDiscountFixedAmount"</span>: <span class="hljs-string">"string"</span>,
    <span class="hljs-string">"saleDiscountPeriods"</span>: <span class="hljs-string">"string"</span>,
    <span class="hljs-string">"saleDiscountSeatPriceOverride"</span>: <span class="hljs-string">"string"</span>,
    <span class="hljs-string">"renewalStatus"</span>: <span class="hljs-string">"string"</span>,
    <span class="hljs-string">"downgradeReason"</span>: <span class="hljs-string">"string"</span>,
    <span class="hljs-string">"planInformation"</span>:{
      <span class="hljs-string">"currencyCode"</span>:<span class="hljs-string">"String content"</span>,
      <span class="hljs-string">"planFeatureSets"</span>:[{
        <span class="hljs-string">"currencyFeatureSetPrices"</span>:[{
          <span class="hljs-string">"currencyCode"</span>:<span class="hljs-string">"String content"</span>,
          <span class="hljs-string">"currencySymbol"</span>:<span class="hljs-string">"String content"</span>,
          <span class="hljs-string">"envelopeFee"</span>:<span class="hljs-string">"String content"</span>,
          <span class="hljs-string">"fixedFee"</span>:<span class="hljs-string">"String content"</span>,
          <span class="hljs-string">"seatFee"</span>:<span class="hljs-string">"String content"</span>
        }],
        <span class="hljs-string">"envelopeFee"</span>:<span class="hljs-string">"String content"</span>,
        <span class="hljs-string">"featureSetId"</span>:<span class="hljs-string">"String content"</span>,
        <span class="hljs-string">"fixedFee"</span>:<span class="hljs-string">"String content"</span>,
        <span class="hljs-string">"isActive"</span>:<span class="hljs-string">"String content"</span>,
        <span class="hljs-string">"isEnabled"</span>:<span class="hljs-string">"String content"</span>,
        <span class="hljs-string">"name"</span>:<span class="hljs-string">"String content"</span>,
        <span class="hljs-string">"seatFee"</span>:<span class="hljs-string">"String content"</span>
      }],
      <span class="hljs-string">"planId"</span>:<span class="hljs-string">"String content"</span>,
      <span class="hljs-string">"freeTrialDaysOverride"</span>:<span class="hljs-string">"String content"</span>
    },
    <span class="hljs-string">"referralInformation"</span>: {
      <span class="hljs-string">"enableSupport"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"includedSeats"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"planStartMonth"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"referralCode"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"referrerName"</span>: <span class="hljs-string">"string "</span>,
      <span class="hljs-string">"advertisementId"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"publisherId"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"shopperId"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"promoCode"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"groupMemberId"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"idType"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-string">"industry"</span>: <span class="hljs-string">"string"</span>
    }
}</code></pre>
<h2 id="header-response">Response <a class="permalink" href="#header-response" aria-hidden="true">¶</a></h2>
<p>The response returns a <strong>success</strong> or <strong>failure</strong>.</p>
</div></div></div><p style="text-align: center;" class="text-muted">Generated by&nbsp;<a href="https://github.com/danielgtaylor/aglio" class="aglio">aglio</a>&nbsp;on 20 Jul 2015</p><script>/* eslint-env browser */
/* eslint quotes: [2, "single"] */
'use strict';

/*
  Determine if a string ends with another string.
*/
function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}

/*
  Get an array [width, height] of the window.
*/
function getWindowDimensions() {
  var w = window,
      d = document,
      e = d.documentElement,
      g = d.body,
      x = w.innerWidth || e.clientWidth || g.clientWidth,
      y = w.innerHeight || e.clientHeight || g.clientHeight;

  return [x, y];
}

/*
  Collapse or show a request/response example.
*/
function toggleCollapseButton(event) {
    var button = event.target.parentNode;
    var content = button.parentNode.nextSibling;
    var inner = content.children[0];

    if (button.className.indexOf('collapse-button') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
        // Currently showing, so let's hide it
        button.className = 'collapse-button';
        content.style.maxHeight = '0px';
    } else {
        // Currently hidden, so let's show it
        button.className = 'collapse-button show';
        content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

/*
  Collapse or show a navigation menu. It will not be hidden unless it
  is currently selected or `force` has been passed.
*/
function toggleCollapseNav(event, force) {
    var heading = event.target.parentNode;
    var content = heading.nextSibling;
    var inner = content.children[0];

    if (heading.className.indexOf('heading') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
      // Currently showing, so let's hide it, but only if this nav item
      // is already selected. This prevents newly selected items from
      // collapsing in an annoying fashion.
      if (force || window.location.hash && endsWith(event.target.href, window.location.hash)) {
        content.style.maxHeight = '0px';
      }
    } else {
      // Currently hidden, so let's show it
      content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

/*
  Refresh the page after a live update from the server. This only
  works in live preview mode (using the `--server` parameter).
*/
function refresh(body) {
    document.querySelector('body').className = 'preload';
    document.body.innerHTML = body;

    // Re-initialize the page
    init();
    autoCollapse();

    document.querySelector('body').className = '';
}

/*
  Determine which navigation items should be auto-collapsed to show as many
  as possible on the screen, based on the current window height. This also
  collapses them.
*/
function autoCollapse() {
  var windowHeight = getWindowDimensions()[1];
  var itemsHeight = 64; /* Account for some padding */
  var itemsArray = Array.prototype.slice.call(
    document.querySelectorAll('nav .resource-group .heading'));

  // Get the total height of the navigation items
  itemsArray.forEach(function (item) {
    itemsHeight += item.parentNode.offsetHeight;
  });

  // Should we auto-collapse any nav items? Try to find the smallest item
  // that can be collapsed to show all items on the screen. If not possible,
  // then collapse the largest item and do it again. First, sort the items
  // by height from smallest to largest.
  var sortedItems = itemsArray.sort(function (a, b) {
    return a.parentNode.offsetHeight - b.parentNode.offsetHeight;
  });

  while (sortedItems.length && itemsHeight > windowHeight) {
    for (var i = 0; i < sortedItems.length; i++) {
      // Will collapsing this item help?
      var itemHeight = sortedItems[i].nextSibling.offsetHeight;
      if ((itemsHeight - itemHeight <= windowHeight) || i === sortedItems.length - 1) {
        // It will, so let's collapse it, remove its content height from
        // our total and then remove it from our list of candidates
        // that can be collapsed.
        itemsHeight -= itemHeight;
        toggleCollapseNav({target: sortedItems[i].children[0]}, true);
        sortedItems.splice(i, 1);
        break;
      }
    }
  }
}

/*
  Initialize the interactive functionality of the page.
*/
function init() {
    var i;

    // Make collapse buttons clickable
    var buttons = document.querySelectorAll('.collapse-button');
    for (i = 0; i < buttons.length; i++) {
        buttons[i].onclick = toggleCollapseButton;

        // Show by default? Then toggle now.
        if (buttons[i].className.indexOf('show') !== -1) {
            toggleCollapseButton({target: buttons[i].children[0]});
        }
    }

    // Make nav items clickable to collapse/expand their content.
    var navItems = document.querySelectorAll('nav .resource-group .heading');
    for (i = 0; i < navItems.length; i++) {
        navItems[i].onclick = toggleCollapseNav;

        // Show all by default
        toggleCollapseNav({target: navItems[i].children[0]});
    }
}

// Initial call to set up buttons
init();

window.onload = function () {
    autoCollapse();
    // Remove the `preload` class to enable animations
    document.querySelector('body').className = '';
};
</script></body></html>