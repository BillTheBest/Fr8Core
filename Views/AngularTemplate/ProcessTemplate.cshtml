@{
    Layout = null;
}

<!-- BEGIN PAGE BREADCRUMB -->
<ul class="page-breadcrumb breadcrumb hide">
    <li>
        <a href="#">Home</a><i class="fa fa-circle"></i>
    </li>
    <li class="active">
        Dashboard
    </li>
</ul>
<!-- END PAGE BREADCRUMB -->
<!-- BEGIN MAIN CONTENT -->
<div ng-controller="ProcessTemplateController" class="margin-top-10">
    <div class="row">
        <div class="col-md-12 col-sm-12">
            <!-- BEGIN PORTLET-->
            <div class="portlet light ">
                <div class="portlet-title">
                    <div class="caption caption-md">
                        <i class="icon-bar-chart font-green-haze hide"></i>
                        <span class="caption-subject font-green-haze bold uppercase">Add a Process</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <!-- PROCESS FORM -->
                    <div class="tab-pane active" id="tab_1_1">
                        <form role="form" ng-submit="submit(form.$valid)" name="form" novalidate>
                            <div class="alert alert-danger" ng-show="form.$submitted && !form.$valid">
                                Some fields do not contain correct data. Please check below.
                            </div>
                            <div class="alert alert-danger" ng-show="errorMessage != null">
                                {{errorMessage}}
                            </div>                            
                            <div ng-class="(form.name.$error.required && form.$submitted) ? 'has-error' : ''" class="form-group">
                                <label class="control-label">Process Name <span class="required">*</span></label>
                                <div class="input-icon right">
                                    <i class="fa fa-warning" ng-show="form.name.$error.required && form.$submitted"></i>
                                    <input type="text" name="name" maxlength="50" placeholder="" class="form-control" ng-model="ptvm.Name" auto-focus required data-required="1" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label">Description</label>
                                <input type="text" placeholder="" class="form-control" ng-model="ptvm.Description" />
                            </div>

                            <div class="form-group">
                                <process-builder id="processBuilder" width="800" height="600"
                                                 criteria-list="criteria"
                                                 on-add-criteria="addCriteria()"
                                                 on-select-criteria="selectCriteria(criteriaId)">
                                </process-builder>
                            </div>

                            <div class="form-group" ng-show="isCriteriaSelected()">
                                <criteria-pane fields="fields"
                                               criteria="selectedCriteria"
                                               on-remove-criteria="removeCriteria()">
                                </criteria-pane>
                            </div>

                            <div class="margiv-top-10">
                                <button type="submit" class="btn green-haze">
                                    Save Changes
                                </button>
                                <a href="#processes" class="btn default">
                                    Cancel
                                </a>
                            </div>
                        </form>
                    </div>
                    <!-- END PROCESS FORM -->

                </div>
            </div>
            <!-- END PORTLET-->
        </div>
    </div>
</div>
<!-- END MAIN CONTENT -->

<!-- BEGIN SCRIPT REQUIREMENTS -->
<script type="text/javascript" src="@Url.Content("~/bower_components/fabric/dist/fabric.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/ProcessBuilder/core.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/ProcessBuilder/pb-consts.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/ProcessBuilder/pb-interfaces.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/ProcessBuilder/pb-fabricjs-img.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/ProcessBuilder/pb-resources.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/ProcessBuilder/pb-widget.js")"></script>
<!-- END SCRIPT REQUIREMENTS -->