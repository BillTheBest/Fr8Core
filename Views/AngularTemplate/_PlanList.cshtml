<md-content>

    <md-toolbar class="md-table-toolbar md-default">
        <div class="md-toolbar-tools">
            <h2 class="md-title font-green-haze bold">RUNNING PLANS</h2>
            <div flex></div>
        </div>
    </md-toolbar>

    <md-table-container>
        <table md-table md-progress="activePromise">
            <thead md-head md-order="activeQuery.orderBy" md-on-reorder="getActivePlans">
                <tr md-row>
                    <th md-column md-order-by="name" style="width: 20%;"><span>Name</span></th>
                    <th md-column style="width: 35%;"><span>Description</span></th>
                    <th md-column md-order-by="lastUpdated" style="width: 20%;">Last Updated</th>
                    <th md-column style="width: 10%;">Status</th>
                    <th md-column md-numeric style="width: 15%;">Actions</th>
                </tr>
            </thead>
            <tbody md-body>
                <tr md-row ng-repeat="plan in activePlans.plans | filter: {planState:2}">
                    <td md-cell class="column-spacer">{{ plan.name }}</td>
                    <td md-cell class="column-spacer">{{ plan.description }}</td>
                    <td md-cell>{{ plan.lastUpdated | date:"MM/dd/yyyy h:mm:ss a"}}</td>
                    <td md-cell>
                        <span class="bold font-green-haze">{{plan.planState == 2 ? 'Active' : 'Inactive' }}</span>
                    </td>
                    <td md-cell style="display: flex;">
                        <md-button class="md-icon-button md-table-fr8-button" ng-click="goToPlanDetailsPage(plan.id);">
                            <md-icon md-font-icon="fa fa-ellipsis-h" class="fa fa-lg"></md-icon>
                            <md-tooltip md-direction="top">
                                Settings
                            </md-tooltip>
                        </md-button>
                        <md-button class="md-icon-button md-table-fr8-button" ng-click="deactivatePlan(plan);">
                            <md-icon md-font-icon="fa-bolt" class="fa fa-lg font-red-haze"></md-icon>
                            <md-tooltip md-direction="top">
                                Deactivate
                            </md-tooltip>
                        </md-button>
                        <md-button class="md-icon-button md-table-fr8-button" ng-click="deletePlan(plan.id,plan.planState);">
                            <md-icon md-font-icon="fa-trash" class="fa fa-lg"></md-icon>
                            <md-tooltip md-direction="top">
                                Delete
                            </md-tooltip>
                        </md-button>
                        <md-button class="md-icon-button md-table-fr8-button" ng-click="goToPlanPage(plan.id);">
                            <md-icon md-font-icon="fa-edit" class="fa fa-lg"></md-icon>
                            <md-tooltip md-direction="top">
                                Edit
                            </md-tooltip>
                        </md-button>
                    </td>
                </tr>
            </tbody>
        </table>
    </md-table-container>

    <md-table-pagination md-limit="activeQuery.planPerPage" md-limit-options="[5, 10, 15, 20]" md-page="activeQuery.page" md-total="{{(activePlans.totalPlanCount || activePlans.totalPlanCount === 0) ? activePlans.totalPlanCount : 'NaN'}}" md-on-paginate="getActivePlans" md-page-select></md-table-pagination>



    <md-toolbar class="md-table-toolbar md-default">
        <div class="md-toolbar-tools">
            <h2 class="md-title font-green-haze">Plan Library</h2>
            <div flex></div>
        </div>
    </md-toolbar>

    <md-table-container>
        <table md-table md-progress="inActivePromise">
            <thead md-head md-order="inActiveQuery.orderBy" md-on-reorder="getInactivePlans">
                <tr md-row>
                    <th md-column md-order-by="name" style="width: 20%;"><span>Name</span></th>
                    <th md-column style="width: 35%;"><span>Description</span></th>
                    <th md-column md-order-by="lastUpdated" style="width: 20%;">Last Updated</th>
                    <th md-column style="width: 10%;">Status</th>
                    <th md-column md-numeric style="width: 15%;">Actions</th>
                </tr>
            </thead>
            <tbody md-body>
                <tr md-row ng-repeat="plan in inActivePlans.plans | filter: {planState:1}">
                    <td md-cell class="column-spacer">{{ plan.name }}</td>
                    <td md-cell class="column-spacer">{{ plan.description }}</td>
                    <td md-cell>{{ plan.lastUpdated | date:"MM/dd/yyyy h:mm:ss a"}}</td>
                    <td md-cell>
                        <span class="bold font-red-haze">{{plan.planState == 2 ? 'Active' : 'Inactive' }}</span>
                    </td>
                    <td md-cell style="display: flex;">
                        <md-button class="md-icon-button md-table-fr8-button" ng-click="goToPlanDetailsPage(plan.id);">
                            <md-icon md-font-icon="fa fa-ellipsis-h" class="fa fa-lg"></md-icon>
                            <md-tooltip md-direction="top">
                                Settings
                            </md-tooltip>
                        </md-button>
                        <md-button class="md-icon-button md-table-fr8-button" ng-click="executePlan(plan,$event);">
                            <md-icon md-font-icon="fa-play" class="fa fa-lg font-green-haze"></md-icon>
                            <md-tooltip md-direction="top">
                                Run
                            </md-tooltip>
                        </md-button>
                        <md-button class="md-icon-button md-table-fr8-button" ng-click="deletePlan(plan.id,plan.planState);">
                            <md-icon md-font-icon="fa-trash" class="fa fa-lg"></md-icon>
                            <md-tooltip md-direction="top">
                                Delete
                            </md-tooltip>
                        </md-button>
                        <md-button class="md-icon-button md-table-fr8-button" ng-click="goToPlanPage(plan.id);">
                            <md-icon md-font-icon="fa-edit" class="fa fa-lg"></md-icon>
                            <md-tooltip md-direction="top">
                                Edit
                            </md-tooltip>
                        </md-button>
                    </td>
                </tr>
            </tbody>
        </table>
    </md-table-container>

    <md-table-pagination md-limit="inActiveQuery.planPerPage" md-limit-options="[5, 10, 15, 20]" md-page="inActiveQuery.page" md-total="{{(inActivePlans.totalPlanCount || inActivePlans.totalPlanCount === 0) ? inActivePlans.totalPlanCount : 'NaN'}}" md-on-paginate="getInactivePlans" md-page-select></md-table-pagination>

</md-content>
